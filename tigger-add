#! /bin/dash

# add files to index
# only ordinary file can be added

# Error checking
# tigger-add: error: tigger repository directory .tigger not found
if [ ! -d ".tigger" ]
then
    echo "$0: error: tigger repository directory .tigger not found" 1>&2
    exit 1
fi 

if [ $# -eq 0 ]
then
    echo "usage: tigger-add <filenames>"
fi

branch="$(cat .tigger/HEAD)"
for f in "$@"
do 
    if [ ! -f "$f" ]
    then
        echo "$0: error: can not open '$f'" 1>&2
        exit 1
    fi
done

cp "$f" .tigger/branches/"$branch"/index

